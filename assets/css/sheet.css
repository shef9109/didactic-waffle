/* Sheet */
.sheet {
    width: 760px;
    position: relative;
    color: var(--ink);
    font-family: var(--font-body);
    background: linear-gradient(160deg, #f8edcc 0%, #ecdfa0 30%, #f0e0b0 65%, #d8c280 100%);
    box-shadow:
        0 0 0 1px var(--gold-dark),
        0 0 0 5px #130e06,
        0 0 0 7px var(--gold-dark),
        0 0 0 8px #0a0702,
        0 0 80px rgba(0, 0, 0, 0.95),
        inset 0 0 100px rgba(139, 90, 20, 0.06);
}

.sh-corner {
    position: absolute;
    width: 56px;
    height: 56px;
    pointer-events: none;
    z-index: 2;
    opacity: 0.85;
}
.sh-corner svg { width: 100%; height: 100%; }
.c-tl { top: 8px; left: 8px; }
.c-tr { top: 8px; right: 8px; transform: scaleX(-1); }
.c-bl { bottom: 8px; left: 8px; transform: scaleY(-1); }
.c-br { bottom: 8px; right: 8px; transform: scale(-1); }

.sh-header {
    position: relative;
    border-bottom: 1px solid var(--gold-dark);
    padding: 38px 54px 24px;
    text-align: center;
}

.sh-type-tag {
    font-family: var(--font-heading);
    font-size: 0.52rem;
    letter-spacing: 0.26em;
    text-transform: uppercase;
    color: var(--text-dim);
    margin-bottom: 8px;
}

.sh-name {
    font-family: var(--font-display);
    font-size: 2.4rem;
    line-height: 1.05;
    letter-spacing: 0.04em;
    color: var(--ink);
}

.sh-body {
    padding: 24px 54px 36px;
    line-height: 1.55;
}

.sh-seal {
    position: absolute;
    top: 24px;
    right: 44px;
    transform: rotate(-8deg);
    filter: drop-shadow(0 7px 16px rgba(0, 0, 0, 0.28));
}

.sh-seal-circle {
    --seal-top: #8e3737;
    --seal-mid: #651818;
    --seal-deep: #2d0707;
    --seal-rim: #9b7a38;
    --seal-ink: #f3dfb2;
    position: relative;
    width: 66px;
    height: 66px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    color: var(--seal-ink);
    border: 2px solid var(--seal-rim);
    background:
        radial-gradient(circle at 30% 24%, rgba(255, 255, 255, 0.24) 0%, rgba(255, 255, 255, 0) 42%),
        radial-gradient(circle at 72% 74%, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0) 56%),
        radial-gradient(circle at 50% 48%, var(--seal-top) 0%, var(--seal-mid) 56%, var(--seal-deep) 100%);
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        inset 0 -8px 12px rgba(0, 0, 0, 0.3),
        0 7px 18px rgba(0, 0, 0, 0.32);
}
.sh-seal-circle::before {
    content: '';
    position: absolute;
    inset: 5px;
    border-radius: 50%;
    border: 1px dashed rgba(255, 255, 255, 0.38);
    opacity: 0.62;
}
.sh-seal-circle::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    box-shadow:
        inset 0 0 0 1px rgba(0, 0, 0, 0.2),
        inset 0 9px 14px rgba(255, 255, 255, 0.06);
}
.sh-seal-circle svg {
    width: 38px;
    height: 38px;
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.35));
}
.sh-seal-label {
    margin-top: 7px;
    text-align: center;
    font-family: var(--font-heading);
    font-size: 0.42rem;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    color: var(--gold-dark);
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.25);
}

.sh-seal-style-wax {
    --seal-top: #a63d3d;
    --seal-mid: #711919;
    --seal-deep: #300707;
    --seal-rim: #9c7a3a;
    --seal-ink: #f2dfb2;
}
.sh-seal-style-steel {
    --seal-top: #aab2bc;
    --seal-mid: #636c78;
    --seal-deep: #2c3239;
    --seal-rim: #98a5b2;
    --seal-ink: #f2f6fa;
}
.sh-seal-style-arcane {
    --seal-top: #8a57d9;
    --seal-mid: #532f9a;
    --seal-deep: #241240;
    --seal-rim: #9f79e2;
    --seal-ink: #f0e4ff;
}
.sh-seal-style-jade {
    --seal-top: #46a98b;
    --seal-mid: #2b6f59;
    --seal-deep: #143629;
    --seal-rim: #68bc9a;
    --seal-ink: #e7fff0;
}

/* Generic blocks */
.sh-section { margin-bottom: 16px; }
.sh-section-title {
    font-family: var(--font-heading);
    font-size: 0.54rem;
    letter-spacing: 0.24em;
    text-transform: uppercase;
    color: var(--blood);
    margin-bottom: 7px;
}

.sh-text {
    font-size: 0.95rem;
    line-height: 1.68;
    color: var(--ink-light);
}

.sh-kv-grid {
    border: 1px solid rgba(139, 90, 20, 0.45);
    display: grid;
    gap: 6px;
    background: transparent;
    padding: 6px;
}

.sh-kv-row {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 12px;
    align-items: center;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.62), rgba(255, 255, 255, 0.45));
    border: 1px solid rgba(139, 90, 20, 0.2);
    padding: 8px 10px;
}

.sh-kv-key {
    font-family: var(--font-heading);
    font-size: 0.54rem;
    font-weight: 700;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: rgba(26, 18, 8, 0.86);
    text-shadow: none;
}

.sh-kv-val {
    font-family: var(--font-heading);
    font-size: 0.98rem;
    font-weight: 700;
    color: var(--ink);
    min-width: 46px;
    text-align: center;
    font-variant-numeric: tabular-nums;
    letter-spacing: 0.04em;
    padding: 2px 6px;
    background: rgba(139, 90, 20, 0.11);
    border: 1px solid rgba(139, 90, 20, 0.3);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.sh-equip-list { display: grid; gap: 8px; }
.sh-equip-item {
    display: flex;
    gap: 10px;
    align-items: flex-start;
}
.sh-equip-bullet {
    width: 18px;
    text-align: center;
    color: var(--gold-dark);
    line-height: 1.5;
}
.sh-equip-name {
    font-family: var(--font-heading);
    font-size: 0.68rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--ink);
    margin-bottom: 2px;
}
.sh-equip-desc {
    font-size: 0.9rem;
    color: var(--ink-light);
    line-height: 1.55;
}

.sh-quote {
    margin-top: 12px;
    border-left: 3px solid var(--gold-dark);
    background: rgba(139, 90, 20, 0.06);
    padding: 10px 14px;
    font-style: italic;
    color: var(--ink);
}

/* Classic layout */
.sh-classic-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
}

/* Passport layout */
.sh-passport-top {
    display: grid;
    grid-template-columns: 1fr 220px;
    gap: 18px;
    margin-bottom: 18px;
}

.sh-passport-main {
    border: 1px solid var(--gold-dark);
    background: rgba(255, 255, 255, 0.32);
    padding: 12px 14px 10px;
}

.sh-passport-fio {
    font-family: var(--font-display);
    font-size: 1.8rem;
    line-height: 1.1;
    color: var(--ink);
    margin-bottom: 4px;
}

.sh-passport-rank {
    font-family: var(--font-heading);
    font-size: 0.62rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--blood);
    margin-bottom: 6px;
}

.sh-passport-org {
    font-family: var(--font-heading);
    font-size: 0.56rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--gold-dark);
    margin-bottom: 10px;
}

.sh-passport-kv {
    display: grid;
    gap: 6px;
    margin-bottom: 12px;
    font-size: 0.9rem;
    border-top: 1px dashed rgba(139, 90, 20, 0.45);
    border-bottom: 1px dashed rgba(139, 90, 20, 0.45);
    padding: 8px 0;
}
.sh-passport-kv span {
    font-family: var(--font-heading);
    text-transform: uppercase;
    font-size: 0.52rem;
    letter-spacing: 0.12em;
    color: var(--gold-dark);
    margin-right: 6px;
}

.sh-passport-photo-box {
    width: 220px;
    height: 220px;
    border: 1px solid var(--gold-dark);
    outline: 1px solid rgba(0, 0, 0, 0.45);
    outline-offset: -5px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    overflow: hidden;
    background: #1b1307;
}

.sh-passport-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: 50% 50%;
    transform-origin: center center;
}

.sh-passport-photo-empty {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--gold-dark);
    font-family: var(--font-heading);
    letter-spacing: 0.22em;
    font-size: 0.56rem;
}

/* Brief layout (combat/arcane) */
.sh-brief-head {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-bottom: 14px;
    border: 1px solid var(--gold-dark);
    padding: 8px;
    background: rgba(255, 255, 255, 0.14);
}

.sh-brief-item {
    border: 1px solid var(--gold-dark);
    padding: 8px 10px;
    background: rgba(255, 255, 255, 0.28);
}
.sh-brief-item span {
    display: block;
    font-family: var(--font-heading);
    font-size: 0.48rem;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    color: var(--gold-dark);
    margin-bottom: 3px;
}
.sh-brief-item b {
    font-family: var(--font-body);
    font-weight: 600;
    color: var(--ink);
}

.sh-brief-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 18px;
    margin-bottom: 12px;
}

.sheet[data-type="combat"] .sh-brief-item span,
.sheet[data-type="arcane"] .sh-brief-item span {
    color: var(--blood);
}

.sheet[data-type="combat"] .sh-section-title,
.sheet[data-type="arcane"] .sh-section-title {
    letter-spacing: 0.18em;
}

/* Footer */
.sh-footer {
    border-top: 1px solid var(--gold-dark);
    padding: 14px 54px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.sh-footer-text {
    font-family: var(--font-heading);
    font-size: 0.48rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--gold-dark);
}

.sh-footer-seal-wrap {
    display: flex;
    align-items: center;
    gap: 8px;
}
.sh-footer-seal-text {
    font-family: var(--font-heading);
    font-size: 0.44rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--gold-dark);
}
.sh-footer-seal {
    position: relative;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    color: var(--seal-ink, #f3dfb2);
    border: 1px solid var(--seal-rim, var(--gold-dark));
    background:
        radial-gradient(circle at 30% 24%, rgba(255, 255, 255, 0.24) 0%, rgba(255, 255, 255, 0) 42%),
        radial-gradient(circle at 72% 74%, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0) 56%),
        radial-gradient(circle at 50% 48%, var(--seal-top, #8e3737) 0%, var(--seal-mid, #651818) 56%, var(--seal-deep, #2d0707) 100%);
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.18),
        inset 0 -5px 8px rgba(0, 0, 0, 0.32);
}
.sh-footer-seal::after {
    content: '';
    position: absolute;
    inset: 3px;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.36);
    opacity: 0.48;
}
.sh-footer-seal svg {
    width: 18px;
    height: 18px;
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.35));
}

/* Themes */
.sheet[data-theme="arcane"] {
    background: linear-gradient(160deg, #1a1228 0%, #0e0818 52%, #150e22 100%);
    --ink: #d7c9ff;
    --ink-light: #baa6e8;
    --gold-dark: #7f66bf;
    --blood: #a88fff;
}
.sheet[data-theme="arcane"] .sh-kv-row {
    background: linear-gradient(90deg, rgba(43, 29, 69, 0.86), rgba(31, 20, 54, 0.9));
    border-color: rgba(138, 99, 212, 0.35);
}
.sheet[data-theme="arcane"] .sh-kv-key {
    color: #e4d2ff;
    text-shadow: none;
}
.sheet[data-theme="arcane"] .sh-kv-val {
    color: #f0e8ff;
    background: rgba(138, 99, 212, 0.24);
    border-color: rgba(168, 143, 230, 0.5);
    box-shadow: inset 0 1px 0 rgba(238, 226, 255, 0.18);
}
.sheet[data-theme="nordic"] {
    background: linear-gradient(160deg, #efe4cf 0%, #decba8 46%, #e7d5b3 100%);
    --gold-dark: #7a5f2e;
}
.sheet[data-theme="oriental"] {
    background: linear-gradient(160deg, #fff3df 0%, #f4e0bf 48%, #f3d5a6 100%);
    --gold-dark: #9a4a1a;
    --blood: #b03320;
}

/* Mobile */
@media (max-width: 900px) {
    .sheet {
        width: 100%;
        max-width: 760px;
    }
    .sh-header {
        padding: 32px 18px 18px;
    }
    .sh-name {
        font-size: 1.7rem;
    }
    .sh-seal {
        position: static;
        transform: none;
        margin: 0 auto 8px;
    }
    .sh-body {
        padding: 16px;
    }
    .sh-footer {
        padding: 12px 16px;
        flex-direction: column;
        gap: 8px;
        align-items: flex-start;
    }
    .sh-classic-grid,
    .sh-brief-grid {
        grid-template-columns: 1fr;
    }
    .sh-brief-head {
        grid-template-columns: 1fr;
    }
    .sh-passport-top {
        grid-template-columns: 1fr;
    }
    .sh-passport-photo-box {
        width: 100%;
        height: min(70vw, 320px);
    }

    .sh-corner {
        width: 42px;
        height: 42px;
    }

    .sh-passport-main {
        padding: 10px;
    }

    .sh-passport-fio {
        font-size: 1.45rem;
    }
}
